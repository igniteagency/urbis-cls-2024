"use strict";(()=>{var o=class{constructor(){this.ITEM_SELECTOR='[data-el="menu-accordion"]';this.TOGGLE_SELECTOR="summary";this.CONTENT_SELECTOR="summary + div";this.ANIMATION_DURATION_IN_MS=300;this.ANIMATION_PROGRESS_CLASSNAME="is-animating";this.accordionEl=document.querySelector(this.ITEM_SELECTOR),this.menuWrapper=document.querySelector(".menu_wrapper"),this.menuBackdrop=document.querySelector(".menu_backdrop"),this.accordionEl&&(this.animateMenu(),this.addBackdropClickListener())}animateMenu(){let t=this.accordionEl.querySelector(this.TOGGLE_SELECTOR),e=this.accordionEl.querySelector(this.CONTENT_SELECTOR);if(!t||!e){console.error("Accordion toggle or content not found",t,e);return}t.addEventListener("click",i=>{if(i.preventDefault(),!this.accordionEl.open){this.accordionEl.open=!0;let{width:r,height:s}=this.getMenuDimensions(e);e.style.height="0px",e.classList.add(this.ANIMATION_PROGRESS_CLASSNAME),e.animate([{height:"0px"},{height:`${s}px`}],{duration:this.ANIMATION_DURATION_IN_MS,fill:"forwards"}).onfinish=()=>{e.style.height="auto",e.classList.remove(this.ANIMATION_PROGRESS_CLASSNAME)}}else{let{width:r,height:s}=this.getMenuDimensions(e);e.classList.add(this.ANIMATION_PROGRESS_CLASSNAME);let a=e.animate([{height:`${s}px`},{height:"0px"}],{duration:this.ANIMATION_DURATION_IN_MS,fill:"forwards"});a.onfinish=()=>{this.accordionEl.open=!1,e.style.height="",e.classList.remove(this.ANIMATION_PROGRESS_CLASSNAME)}}})}getMenuDimensions(t){return{width:t.scrollWidth,height:t.scrollHeight+5}}addBackdropClickListener(){if(this.menuWrapper&&this.menuBackdrop){let t=this.menuWrapper.querySelector(this.CONTENT_SELECTOR),e=this.menuWrapper.querySelectorAll("a");if(!t){console.error("Accordion content not found for the backdrop click");return}this.menuBackdrop.addEventListener("click",()=>{this.closeMenuWithAnimation(t)}),e.forEach(i=>{i.addEventListener("click",()=>{this.closeMenuWithAnimation(t)})})}}closeMenuWithAnimation(t){if(this.menuWrapper&&this.menuWrapper.hasAttribute("open")){let{height:e}=this.getMenuDimensions(t);t.classList.add(this.ANIMATION_PROGRESS_CLASSNAME);let i=t.animate([{height:`${e}px`},{height:"0px"}],{duration:this.ANIMATION_DURATION_IN_MS,fill:"forwards"});i.onfinish=()=>{var n;(n=this.menuWrapper)==null||n.removeAttribute("open"),t.style.height="",t.classList.remove(this.ANIMATION_PROGRESS_CLASSNAME)}}}},h=o;})();
