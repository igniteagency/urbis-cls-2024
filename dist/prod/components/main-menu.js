"use strict";(()=>{var o=class{constructor(){this.ITEM_SELECTOR='[data-el="menu-accordion"]';this.TOGGLE_SELECTOR="summary";this.CONTENT_SELECTOR="summary + div";this.ANIMATION_DURATION_IN_MS=300;this.ANIMATION_PROGRESS_CLASSNAME="is-animating";this.accordionEl=document.querySelector(this.ITEM_SELECTOR),this.menuWrapper=document.querySelector(".menu_wrapper"),this.menuBackdrop=document.querySelector(".menu_backdrop"),this.accordionEl&&(this.animateMenu(),this.addBackdropClickListener())}animateMenu(){let t=this.accordionEl.querySelector(this.TOGGLE_SELECTOR),e=this.accordionEl.querySelector(this.CONTENT_SELECTOR);if(!t||!e){console.error("Accordion toggle or content not found",t,e);return}t.addEventListener("click",n=>{if(n.preventDefault(),!this.accordionEl.open){this.accordionEl.open=!0;let{width:s,height:i}=this.getMenuDimensions(e);e.style.height="0px",e.classList.add(this.ANIMATION_PROGRESS_CLASSNAME),e.animate([{height:"0px"},{height:`${i}px`}],{duration:this.ANIMATION_DURATION_IN_MS,fill:"forwards"}).onfinish=()=>{e.style.height="auto",e.classList.remove(this.ANIMATION_PROGRESS_CLASSNAME)}}else{let{width:s,height:i}=this.getMenuDimensions(e);e.classList.add(this.ANIMATION_PROGRESS_CLASSNAME);let a=e.animate([{height:`${i}px`},{height:"0px"}],{duration:this.ANIMATION_DURATION_IN_MS,fill:"forwards"});a.onfinish=()=>{this.accordionEl.open=!1,e.style.height="",e.classList.remove(this.ANIMATION_PROGRESS_CLASSNAME)}}})}getMenuDimensions(t){return{width:t.scrollWidth,height:t.scrollHeight+5}}addBackdropClickListener(){var t;if(this.menuWrapper&&this.menuBackdrop){let e=this.menuWrapper.querySelector(this.CONTENT_SELECTOR);if(!e){console.error("Accordion content not found for the backdrop click");return}(t=this.menuBackdrop)==null||t.addEventListener("click",()=>{var n;if((n=this.menuWrapper)!=null&&n.hasAttribute("open")){let{height:r}=this.getMenuDimensions(e);e.classList.add(this.ANIMATION_PROGRESS_CLASSNAME);let s=e.animate([{height:`${r}px`},{height:"0px"}],{duration:this.ANIMATION_DURATION_IN_MS,fill:"forwards"});s.onfinish=()=>{var i;(i=this.menuWrapper)==null||i.removeAttribute("open"),e.style.height="",e.classList.remove(this.ANIMATION_PROGRESS_CLASSNAME)}}})}}},l=o;})();
